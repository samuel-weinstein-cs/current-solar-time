
<html>
<title>Year Color Clock</title>
<style>
html body {
	margin: 0;
	padding: 0;
	height: 100%;
	width: 100%;
}
.background {
	width: 100%;
	height: 100%;
	position: absolute;
	vertical-align: middle;
}

#time {
	color: black;
	font-family: Monaco, Lucida Console, monospace;
	text-align: center;
	font-size: 3vw;
	display: block;
	min-width: 200px;
	font-weight: 100;
}
#extras {
	color: black;
	font-family: Monaco, Lucida Console, monospace;
	text-align: center;
	font-size: 3vw;
	display: block;
	min-width: 200px;
	font-weight: 100;
}
.absolute-center {
	/*width: 50%;*/
  	margin: auto;
  	position: absolute;
  	top: 50%; left: 50%;
  	-webkit-transform: translate(-50%,-50%);
      -ms-transform: translate(-50%,-50%);
          transform: translate(-50%,-50%);
}

</style>
</head>
<body>
<div style="background-color: rgb(255, 255, 255);" class="background">
<div class="absolute-center">
<p id="time">time</p>
<!--<p id="extras">extras</p>-->

</div>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script>
window.onerror = function(msg, url, linenumber) {
    alert('Error message: '+msg+'\nURL: '+url+'\nLine Number: '+linenumber);
    return true;
}
</script>
<script>
function toRadians (angle) {
	return angle * (Math.PI / 180);
}
function dayofyear(d){
	var start = new Date(d.getFullYear(), 0, 1);
	var diff = d-start;
	diff=Math.ceil(diff/1000/60/60/24)
	return((diff).toString());
}
function refreshData(){
	//source: http://holbert.faculty.asu.edu/eee463/SolarCalcs.pdf
	var d = new Date();
	var n = dayofyear(d);
	var lst= new Date(d);
	lst.setHours(lst.getHours()+lst.getTimezoneOffset()/60);
	var long=-74.938617;
	//var long=-73.1
	var lstm=0;
	var y=d.getFullYear();
	length=y%4==0?y%100==0?y%400==0?366:365:366:365;
	var deg=360*(n-81)/length;
	deg=toRadians(deg);
	et=9.87*Math.sin(2*deg)-7.53*Math.cos(deg)-1.5*Math.sin(deg);
	lst.setMilliseconds(lst.getMilliseconds()-((4*(lstm-long)-et)*1000*60));
	var h=lst.getHours();
	var m=lst.getMinutes();
	var s=lst.getSeconds();
	var ms=lst.getMilliseconds();
	
 	if (h<=9) {h = '0'+h};
 	if (m<=9) {m = '0'+m};
	if (s<=9) {s = '0'+s};
	if (ms<=9) {ms='0'+ms};
	if (ms<=99) {ms='0'+ms};
	var time = h+":"+m+":"+s+"."+ms;
	$("p#time").text(time);
	//$("p#extras").text(et.toFixed(5));
	//$("p#extras").text(length);
	
	setTimeout(refreshData);

}
  
refreshData(); // execute function
		</script>
	</body>
</html>
